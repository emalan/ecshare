<?xml version="1.0" encoding="UTF-8"?>

<beans xmlns="http://www.springframework.org/schema/beans" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
    xmlns:util="http://www.springframework.org/schema/util"
    xsi:schemaLocation="http://www.springframework.org/schema/beans 
    http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
    http://www.springframework.org/schema/util http://www.springframework.org/schema/util/spring-util-2.0.xsd">

<import resource="classpath:com/madalla/cms/service/ocm/applicationContext-cms.xml"/>
<import resource="classpath:com/madalla/email/applicationContext-email.xml"/>
<import resource="classpath:com/madalla/cms/jcr/applicationContext-jcr.xml"/>
<import resource="classpath:com/madalla/db/dao/applicationContext-dao.xml"/>

<bean id="propertyConfigurerDefault" 
        class="org.springframework.beans.factory.config.PropertyPlaceholderConfigurer">
    <property name="placeholderPrefix" value="#["/>
    <property name="placeholderSuffix" value="]"/>    
    <property name="locations">
        <list>
            <value>classpath:build.properties</value>
        </list>
    </property>
</bean>

<bean id="rpxService" class="com.madalla.rpx.Rpx">
    <property name="apiKey" value="${openid.apiKey}"></property>
    <property name="baseUrl" value="${openid.baseUrl}"></property>
    <property name="callback" value="${openid.callback}"></property>
</bean>

<bean id="buildInformation" class="com.madalla.BuildInformation">
	<property name="version" value="#[application.version]"></property>
</bean>

<bean abstract="true" id="wicketApplicationParent" class="com.madalla.webapp.CmsApplication">
    <property name="repositoryService" ref="dataService"/>
    <property name="repositoryAdminService" ref="repositoryAdminService"/>
    <property name="emailSender" ref="emailSender"/>
    <property name="rpxService" ref="rpxService"/>
    <property name="buildInformation" ref="buildInformation"></property>
    <property name="configType" value="${wicket.configuration}"></property>
</bean>


</beans>